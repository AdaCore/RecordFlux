package Parameterized is

   type Length is range 0 .. 2**16 - 1 with Size => 16;
   type Tag is (Tag_A, Tag_B) with Size => 8;

   type Message (Length : Length; Has_Tag : Boolean; Tag_Value : Tag) is
      message
         Payload : Opaque
            with Size => Length * 8
            then Tag
               if Has_Tag = True
            then null
               if Has_Tag = False;
         Tag : Tag
            then null
               if Tag = Tag_Value;
      end message;

end Parameterized;
