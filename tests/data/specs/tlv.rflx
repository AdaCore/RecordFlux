package TLV is

   type Tag is (MSG_DATA => 1, MSG_ERROR => 3) with Size => 2;
   type Length is mod 2**14;

   type Message is
      message
         Tag    : Tag
            then Length
               if Tag = MSG_DATA
            then null
               if Tag = MSG_ERROR;
         Length : Length
            then Value
               with Size => Length * 8;
         Value  : Opaque;
       end message;

end TLV;
